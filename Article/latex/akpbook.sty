% Engel contributors: DO NOT EDIT THIS FILE
%
%*******************************************************************************
% Style file for books
% Copyright A K Peters, Ltd.
%
% Sections marked NOT USED are valid, but an alternate set of commands are being
% used instead, or that set of commands isn't needed for this particular book.
%*******************************************************************************

%*******************************************************************************
% UTILITY
%
% When used with \clearpage, helps with fullpage figs
\RequirePackage{afterpage}

% Formats dates and times as well as counters
\RequirePackage{datetime}

% Allows embedding eps/ps images
\RequirePackage[dvips]{graphicx}

% Enables dropcaps
\RequirePackage{lettrine}

% Sets up index
\RequirePackage{makeidx}

% "Properly" breaks urls
\RequirePackage{url}

% Provides improved \cite command
\usepackage{cite}
%*******************************************************************************
% make sure url has the same font as text
\urlstyle{same}

% Donald Arsenau's fix for missing kerning of "//" and ":/"
%\makeatletter
\def\Uslash{\mathbin{\mathchar`\/}\@ifnextchar{/}{\kern-.15em}{}}
\g@addto@macro\UrlSpecials{\do \/ {\Uslash}}
\def\Ucolon{\mathbin{\mathchar`:}\@ifnextchar{/}{\kern-.1em}{}}
\g@addto@macro\UrlSpecials{\do : {\Ucolon}}
%\makeatother


%*******************************************************************************
% FONTS
%
% Additional fonts besides Computer Modern included with MikTeX
%
% Font                Family  Series  Shape   Variant     PostScript font names
% ------------------------------------------------------------------------------------------------------
% Avant Garde         pag     d       o                   URWGothicL-Demi, URWGothicL-DemiObli
%                     pag     k       o                   URWGothicL-Book, URWGothicL-BookObli
% Bookman             pbk     d       i                   URWBookmanL-DemiBold, URWBookmanL-DemiBoldItal
%                     pbk     l       i                   URWBookmanL-Ligh, URWBookmanL-LighItal
% Charter             bch     b       i                   CharterBT-Bold, CharterBT-BoldItalic
%                     bch     r       i                   CharterBT-Roman, CharterBT-Italic
% Courier             pcr     b       o                   NimbusMonL-Bold, NimbusMonL-BoldObli
%                     pcr     r       o                   NimbusMonL-Regu, NimbusMonL-ReguObli
% Helvetica           phv     b       o       n           NimbusSanL-Bold, NimbusSanL-BoldCond,
%                                                         NimbusSanL-BoldItal, NimbusSanL-BoldCondItal
%                     phv     r       o       n           NimbusSanL-Regu, NimbusSanL-ReguCond
%                                                         NimbusSanL-ReguItal, NimbusSanL-ReguCondItal
% New Century Schlbk  pnc     b       i                   CenturySchL-Bold, CenturySchL-BoldItal
%                     pnc     r       i                   CenturySchL-Roma, CenturySchL-Ital
% Palatino            ppl     b       i                   URWPalladioL-Bold, URWPalladioL-BoldItal
%                     ppl     r       i                   URWPalladioL-Roma, URWPalladioL-Ital
% Symbol              psy     r                           StandardSymL
% Times               ptm     b       i                   NimbusRomNo9L-Medi, NimbusRomNo9L-MediItal
%                     ptm     r       i                   NimbusRomNo9L-Regu, NimbusRomNo9L-ReguItal
% Utopia              put     b       i                   Utopia-Bold, Utopia-BoldItalic
%                     put     r       i                   Utopia-Regular, Utopia-Italic
% Zapf Chancery       pzm     m       i                   ZapfChancery-MediumItalic
% Dingbats            pzd     r                           ZapfDingbats
%
% NOTE: To force dvips to embed fonts in the .ps file dvipsDownloadBase35
% must be set to true (default is false) in the /localtexmf/web2c/updmap.cfg
% file.  If you don't, then the actual Adobe fonts MUST be installed on the
% local system.  Otherwise, Distiller will complain about missing fonts.
% Any changes to the updmap.cfg file will not appear until "initexmf --mkmaps"
% is run.  This is only applicable to Avant Garde, Bookman, New Century
% Schoolbook, Palatino, and Zapf Chancery.  Charter and Utopia are provided via
% MikTex and Courier, Helvetica, Symbol, Times, and Dingbats ship with Distiller.
%
%
% ASIDE: For whatever reason, MikTeX uses the Adobe family prefix (e.g. pag)
% instead of the URW family prefix (e.g. uag) even though the URW font files
% are the ones that are referenced, probably due to some internal mapping.
%
%
% As of June 2007 the following fonts are available on the Production drive
% under /Fonts/ForMikTeX/:
%
% Font                Family  Series  Shape   Variant     PostScript font names
% ------------------------------------------------------------------------------------------------------
% Adobe Caslon        pac     b       i                   ACaslon-Bold, ACaslon-BoldItalic
%                     pac     r       i                   ACaslon-Regular, ACaslon-Italic
%                     pac     sb      i                   ACaslon-Semibold, ACaslon-SemiboldItalic
% Aperto              la0     b       i                   LinotypeAperto-SemiBold, LinotypeAperto-SemiBoldItalic
%                     la0     r       i                   LinotypeAperto-Roman, LinotypeAperto-Italic
% Bell Gothic         pbe     l                           BellGothic-Light
%                     pbe     b                           BellGothic-Bold
%                     pbe     eb                          BellGothic-Black
% Bodoni              pbd     b       i                   Bodoni-Bold, Bodoni-BoldItalic
%                     pbd     r       i                   Bodoni, Bodoni-Italic
%                     pbd     k       i                   Bodoni-Book, Bodoni-BookItalic
% Calisto             mc1     r       i                   CalistoMT, CalistoMT-Italic
%                     mc1     b       i                   CalistoMT-Bold, CalistoMT-BoldItalic
% Eurostile LT        les     b       o       n,e         EurostileLT-Bold, EurostileLT-BoldOblique, EurostileLT-BoldCondensed, EurostileLT-BoldExtendedTwo
%                     les     r       o       n,e         EurostileLT, EurostileLT-Oblique, EurostileLT-Condensed, EurostileLT-ExtendedTwo
%                     les     db      o                   EurostileLT-Demi, EurostileLT-DemiOblique
% Franklin Gothic     pfg     r               n           FranklinGothic-Roman, FranklinGothic-Condensed
% Friz Quadrata       pfq     b                           FrizQuadrata, FrizQuadrata-Bold
% Galliard            pgl     b       i                   Galliard-Bold, Galliard-BoldItalic
%                     pgl     eb      i                   Galliard-Black, Galliard-BlackItalic
%                     pgl     r       i                   Galliard-Roman, Galliard-Italic
%                     pgl     ub      i                   Galliard-Ultra, Galliard-UltraItalic
% ITC Kabel           ikb     b                           ItcKabel-Bold
%                     ikb     db                          ItcKabel-Demi
%                     ikb     mb                          ItcKabel-Medium
%                     ikb     r                           ItcKabel-Book
%                     ikb     ub                          ItcKabel-Ultra
% ITC Officina Sans   po9     b       i                   OfficinaSans-Bold, OfficinaSans-BoldItalic
%                     po9     r       i                   OfficinaSans-Book, OfficinaSans-BookItalic
% ITC Officina Serif  po8     b       i                   OfficinaSerif-Bold, OfficinaSerif-BoldItalic
%                     po8     r       i                   OfficinaSerif-Book, OfficinaSerif-BookItalic
% Gill Sans           lgs     b       i       n           GillSans-Bold, GillSans-BoldItalic, GillSans-BoldCondensed
%                     lgs     r       i       n           GillSans, GillSans-Italic, GillSans-Condensed
% Goudy               pgy     b       i                   Goudy-Bold, Goudy-BoldItalic
%                     pgy     r       i                   Goudy, Goudy-Italic
% Lucida Bright                     * see doc\fonts\lucida\lucida.txt
% Optima LT           lop     b       i                   OptimaLT-Bold, OptimaLT-BoldItalic
%                     lop     r       i                   OptimaLT, OptimaLT-Italic
% Sabon               psb     b       i                   Sabon-Bold, Sabon-BoldItalic
%                     psb     r       i                   Sabon-Roman, Sabon-Italic
% University Roman    luy     r                           UniversityRomanPlain
%                     luy     b                           UniversityRomanBoldPlain
% VAG Rounded         pvr     b                           VAGRounded-Bold
%                     pvr     eb                          VAGRounded-Black
%                     pvr     r                           VAGRounded-Light
%                     pvr     l                           VAGRounded-Thin
%
% In addition, the following packages on the Production drive under
% /Fonts/ForMikTeX/ provide fonts:
%
% MCFonts: Adobe Garamond and Adobe Frutiger
% TM-Math: TM Math Symbol fonts and Adobe Times
% Fourier: is installed via the package manager
%*******************************************************************************
% handy command to change the size of a font
% USAGE: \setsize{<fontsize>}{<baselineskip>}
% NOTE: Baseline skip is typically 1.2 times the fontsize.
\def\setsize{\csname @setfontsize\endcsname \setsize}

% Font families
% PACKAGE ACCESS: See psnfss2e.pdf in the /texmf/doc/latex/psnfss folder.
% USAGE: Select fonts via \usepackage.  The last \usepackage command will override
% the previous one. e.g. bookman followed by helvet results with sans serif font
% being Helvetica instead of Avant Garde.
%
% package      | roman           sans serif        typewriter         formulas
% --psnfss----------------------------------------------------------------------
% (none)       | CM Roman        CM Sans Serif     CM Typewriter      ~CM Roman
% mathpazo     | Palatino                                             ~Palatino
% mathptmx     | Times                                                ~Times
% pifont       |                                                      Dingbats, Symbols
% charter      | Charter
% chancery     | Zaph Chancery
% helvet       |                 Helvetica
% avant        |                 Avant Garde
% courier      |                                   Courier
% bookman      | Bookman         Avant Garde       Courier
% newcent      | NC Schoolbook   Avant Garde       Courier
% --other----------------------------------------------------------------------
% fourier      | Utopia                                               Fourier
% mcfonts      | AGaramond       Frutiger
% --akp------------------------------------------------------------------------
% acaslon      | Adobe Caslon
% aperto       |                 Aperto
% bell         |                 Bell Gothic
% bodoni       | Bodoni
% calisto      | Calisto
% eurostile    |                 Eurostile
% frankgth     |                 Franklin Gothic
% frizquad     |                 Friz Quadrata
% galliard     | Galliard
% gillsans     |                 Gill Sans
% goudy        | Goudy
% kabel        |                 Kabel
% lucidabr     | LucidaBright    LucidaSans        LucidaTypewriter   ~LucidaBright
% myriad       |                 Myriad
% offsans      |                 Officina Sans
% offserif     |                 Officina Serif
% optimalt     |                 Optima LT
% sabon        | Sabon
% tekton       |                 Tekton
% university   |                 University Roman
% --OBSOLETE: DO NOT USE! see psnfss2e.pdf-------------------------------------
% mathppl      | Palatino                                             ~Palatino
% mathptm      | Times                                                ~Times
% utopia       | Utopia
% palatino     | Palatino        Helvetica         Courier
% times        | Times           Helvetica         Courier
%
% NOTE: helvet has an option to scale the font.
%   \usepackage[scaled=<scale>]{helvet} OR
%   \usepackage[scaled]{helvet} which defaults to .95
% NOTE: lucidabr is an EXTENSIVE family.  Review doc\fonts\lucidabr\lucida-sample.pdf
%       for more information
%\usepackage{fourier}
%\usepackage{aperto}
%\usepackage{courier}
% uncomment next three lines (or put them in the preamble) to enable narrow variant
% for the main font (see chart above for availability)
% \renewcommand{\seriesdefault}{mc}
% \renewcommand{\mddefault}{mc}
% \renewcommand{\bfdefault}{bc}

% handy commands to select different weights or variants of a font
% NOTE: necessary for sans serif fonts since there's no way to globally set
% the weight or variant, only the font family (i.e., \sfdefault}
% EXAMPLE: \renewcommand{\MT}{\condensed\setsize{30pt}{36pt}\sffamily}
\newcommand{\condensed}{\fontseries{mc}\selectfont}
\newcommand{\boldcondensed}{\fontseries{bc}\selectfont}

\newcommand{\ultralight}{\fontseries{ul}\selectfont}
\newcommand{\extralight}{\fontseries{el}\selectfont}
\newcommand{\light}{\fontseries{l}\selectfont}
\newcommand{\semilight}{\fontseries{sl}\selectfont}
\newcommand{\mediumbold}{\fontseries{mb}\selectfont}
\newcommand{\semibold}{\fontseries{sb}\selectfont}
\newcommand{\demibold}{\fontseries{db}\selectfont}
\newcommand{\extrabold}{\fontseries{eb}\selectfont}
\newcommand{\ultrabold}{\fontseries{ub}\selectfont}


% Front matter.  See front.tex.
\newcommand{\MT}{\setsize{30pt}{36pt}\sffamily} % main title
\newcommand{\MTSUB}{\setsize{20pt}{24pt}\sffamily} % subtitle
\newcommand{\MTSMALL}{\setsize{25pt}{30pt}\sffamily} % small version of main title
\newcommand{\MTA}{\setsize{18pt}{22pt}\sffamily} % author
\newcommand{\MTL}{\setsize{9pt}{13pt}\sffamily} % logo
\newcommand{\MTD}{\setsize{12pt}{13.5pt}\sffamily} % dedication

% Table of contents
\newcommand{\TOC}{\setsize{10pt}{12pt}\sffamily} % Use {\TOCM $A_math$} for inline math
\newcommand{\TOCM}{\setsize{11pt}{16pt}}

% Part titles
\newcommand{\PT}{\setsize{16pt}{19pt}\sffamily} %
\newcommand{\PN}{\setsize{42pt}{50.5pt}\sffamily} % part numbers

% Chapter titles
\newcommand{\CNSIZE}{60pt}
\newcommand{\CNSKIP}{72pt}
\newcommand{\CN}{\setsize{\CNSIZE}{\CNSKIP}\sffamily} % chapter numbers
\newcommand{\CTSIZE}{24pt}
\newcommand{\CTSKIP}{29pt}
\newcommand{\CT}{\setsize{\CTSIZE}{\CTSKIP}\sffamily\upshape} % Use {\CTM $A_math$} for inline math
\newcommand{\CTIT}{\setsize{\CTSIZE}{\CTSKIP}\sffamily\itshape} % italics
\newcommand{\CTM}{\setsize{11pt}{16pt}}

% Running heads
\newcommand{\RH}{\setsize{9pt}{11pt}\sffamily} % Use {\RHM $A_math$} for inline math
\newcommand{\RHIT}{\setsize{9pt}{11pt}\sffamily\itshape} % italics
\newcommand{\RHM}{\setsize{9pt}{11pt}}

% Section heads
\newcommand{\HDONESIZE}{15pt}
\newcommand{\HDONESKIP}{18pt}
\newcommand{\HDONE}{\setsize{\HDONESIZE}{\HDONESKIP}\sffamily} % Use {\HDONEM $A_math$} for inline math
\newcommand{\HDONEIT}{\setsize{\HDONESIZE}{\HDONESKIP}\sffamily\itshape} % italics
\newcommand{\HDONEM}{\setsize{9pt}{11pt}}
\newcommand{\HDTWOSIZE}{12pt}
\newcommand{\HDTWOSKIP}{14.5pt}
\newcommand{\HDTWO}{\setsize{\HDTWOSIZE}{\HDTWOSKIP}\sffamily} % Use {\HDTWOM $A_math$} for inline math
\newcommand{\HDTWOIT}{\setsize{\HDTWOSIZE}{\HDTWOSKIP}\sffamily\itshape} % italics
\newcommand{\HDTWOM}{\setsize{9pt}{11pt}}
\newcommand{\HDTHREE}{\setsize{10pt}{12pt}\sffamily}

% Captions
\newcommand{\CAP}{\small}
\newcommand{\CAPNUM}{\small\sffamily\bfseries}

% Add new font definitions here

%*******************************************************************************
% MATH
%
\RequirePackage{amsfonts}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage[amsmath,thmmarks,noconfig]{ntheorem} % enchanced theorem-like environments
%*******************************************************************************
\theoremnumbering{arabic}
\theoremstyle{plain}
\theoremheaderfont{\small\normalfont\sffamily\bfseries}
\theoremseparator{}
\theorembodyfont{\itshape}
\theoremsymbol{}
\newtheorem{Theorem}{Theorem}[chapter]
\newtheorem{theorem}[Theorem]{Theorem}
\newtheorem{Proposition}[Theorem]{Proposition}
\newtheorem{proposition}[Theorem]{Proposition}
\newtheorem{Lemma}[Theorem]{Lemma}
\newtheorem{lemma}[Theorem]{Lemma}
\newtheorem{Corollary}[Theorem]{Corollary}
\newtheorem{corollary}[Theorem]{Corollary}

\theorembodyfont{\upshape}
\newtheorem{Example}[Theorem]{Example}
\newtheorem{example}[Theorem]{Example}
\newtheorem{Remark}[Theorem]{Remark}
\newtheorem{remark}[Theorem]{Remark}
\newtheorem{Definition}[Theorem]{Definition}
\newtheorem{definition}[Theorem]{Definition}
\newtheorem{Problem}[Theorem]{Problem}
\newtheorem{problem}[Theorem]{Problem}
\newtheorem{axiom}[Theorem]{Axiom}

\theoremstyle{nonumberplain}
\theoremheaderfont{\itshape}
\theoremseparator{:}
\theorembodyfont{\normalfont}
\theoremsymbol{\ensuremath{\Box}}
\newtheorem{Proof}{Proof}
\newtheorem{proof}{Proof}
\qedsymbol{\ensuremath{\Box}}
\theoremclass{LaTeX}

%*******************************************************************************
% CODE AND PSEUDOCODE
%
% Typeset algorithms
\RequirePackage{algorithm2e}
%*******************************************************************************

%*******************************************************************************
%% CODE LISTINGS
%%
\usepackage{float}
\usepackage{listings}

\lstset{% general command to set parameter(s)
%language=Octave -> choose the language of the code
basicstyle=\footnotesize, % print whole listing small
keywordstyle=\color{black}\bfseries, %\underbar, % underlined bold black keywords
captionpos=b, %-> sets the caption-position to bottom
stringstyle=\ttfamily, % typewriter type for strings
frame=single
%identifierstyle=, % nothing happens
%commentstyle=\color{white}, % white comments
%showstringspaces=false % no special string spaces
%numbers=left -> where to put the line-numbers
%numberstyle=\footnotesize -> size of the fonts used for the
%line-numbers stepnumber=2 -> the step between two line-numbers.
%numbersep=5pt -> how far the line-numbers are from the code
%backgroundcolor=\color{white} %-> sets background color (needs package)
%showspaces=false -> show spaces adding particular
%underscores showstringspaces=false %-> underline spaces within
%strings showtabs=false %-> show tabs within strings through
%particular underscores frame=single %-> adds a frame around the code
%tabsize=2 %-> sets default tab-size to 2 spaces
%breaklines=true %-> sets automatic line breaking
%breakatwhitespace=false, %-> automatic breaks happen at
%whitespace morecomment=[l]{//} %-> displays comments in italics (language dependent)
}


%
%\floatstyle{plain}
%\newfloat{sample}{tbph}{smp}[chapter]
%\floatname{sample}{Listing}
%
%
%% define some colors
%\usepackage{color}
%
%%\definecolor{code}{rgb}{0.8,0.8,1.0}
%%\definecolor{code}{cmyk}{.19,.18,0,0}
%\definecolor{code}{cmyk}{.11,.1047,0,0}
%%\definecolor{maths}{rgb}{0.8,0.8,1.0}
%\definecolor{maths}{cmyk}{.19,.18,0,0}
%%\definecolor{lightgray}{rgb}{0.9,0.9,0.9}
%\definecolor{lightgray}{cmyk}{0.09,0.07,0,0}
%%\definecolor{dark_gray}{rgb}{0.7,0.7,0.7}
%\definecolor{dark_gray}{cmyk}{.31,.25,.25,0}
%%\definecolor{prepros}{rgb}{0.0,0.0,0.6}
%\definecolor{prepros}{cmyk}{1,.98,.10,.09}
%%\definecolor{comments}{rgb}{0.4,0.4,0.5}
%\definecolor{comments}{cmyk}{.65,.59,.35,.11}
%%\definecolor{tokens}{rgb}{0.6,0.0,0.0}
%\definecolor{tokens}{cmyk}{.26,1,1,.28}
%%\definecolor{funcs}{rgb}{0.0,0.4,0.0}
%\definecolor{funcs}{cmyk}{.88,.35,1,.30}
%%\definecolor{display}{cmyk}{1,.95, .17,.18}
%\definecolor{display}{cmyk}{.90,.39, 1,.39}
%\definecolor{accent}{cmyk}{1,.98, .32,.25}
%\definecolor{white}{cmyk}{0,0,0,0}
%*******************************************************************************

%*******************************************************************************
% PART PAGE
%*******************************************************************************
% Redefines \part so that it starts at the top of the page and has no headers
% or footers
\renewcommand\part{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \thispagestyle{empty} % AKP changed, controls display of headers and footers
  \if@twocolumn
    \onecolumn
    \@tempswatrue
  \else
    \@tempswafalse
  \fi
% AKP \null\vfil
  \secdef\@part\@spart}

% NOT USED % Redefines \@part to accept text as a second argument and to change the formatting
% NOT USED \def\@part[#1]#2#3{ % AKP added third argument
% NOT USED     \ifnum \c@secnumdepth >-2\relax
% NOT USED       \refstepcounter{part}%
% NOT USED       \addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
% NOT USED     \else
% NOT USED       \addcontentsline{toc}{part}{#1}%
% NOT USED     \fi
% NOT USED     \markboth{}{}%
% NOT USED     {\centering
% NOT USED      \interlinepenalty \@M
% NOT USED      \normalfont
% NOT USED      \ifnum \c@secnumdepth >-2\relax
% NOT USED        \PN \partname\nobreakspace\thepart % AKP changed font to \PN
% NOT USED        \par
% NOT USED        \vskip 13\p@
% NOT USED      \fi
% NOT USED      \PT #2\par}  % AKP changed font to \PT
% NOT USED      \vskip 30\p@ % AKP added, controls space between part title and text
% NOT USED      #3           % AKP added, the text
% NOT USED     \@endpart}

%*******************************************************************************
% CHAPTER PAGE
%
% TO DO: find a package for formatting chapter titles.  fncychap seems a little
% limited
%*******************************************************************************
% define a handy alias for starred chapters that get added to the toc
\newcommand{\chapterstar}[1]{
  \chapter*{#1}
  \addcontentsline{toc}{chapter}{#1}
}
%
%% redefine chapter so that the long title is used in the TOC instead of the short one
%\def\@chapter[#1]#2{\ifnum \c@secnumdepth >\m@ne
%                       \if@mainmatter
%                         \refstepcounter{chapter}%
%                         \typeout{\@chapapp\space\thechapter.}%
%                         \addcontentsline{toc}{chapter}%
%                                   {\protect\numberline{\thechapter}#1}%
%                       \else
%                         % \addcontentsline{toc}{chapter}{#1}% AKP commented out
%                         \addcontentsline{toc}{chapter}{#2}% AKP added
%                       \fi
%                    \else
%                      % \addcontentsline{toc}{chapter}{#1}% AKP commented out
%                      \addcontentsline{toc}{chapter}{#2}% AKP added
%                    \fi
%                    \chaptermark{#1}%
%                    \addtocontents{lof}{\protect\addvspace{10\p@}}%
%                    \addtocontents{lot}{\protect\addvspace{10\p@}}%
%                    \if@twocolumn
%                      \@topnewpage[\@makechapterhead{#2}]%
%                    \else
%                      \@makechapterhead{#2}%
%                      \@afterheading
%                    \fi}
%
%% redefines \@makechapterhead to format the 1st \chapter page
%\def\@makechapterhead#1{%
%%  \vspace*{50\p@}  % AKP commented out so chapter starts at top
%  {\parindent \z@ \raggedright \normalfont
%    \ifnum \c@secnumdepth >\m@ne
%      \if@mainmatter
%% NOT USED         % ******** Centered chapter number between hyphens ********
%% NOT USED         \begin{center}\CN - \thechapter\ - \end{center} % AKP positions chapter number and sets the font
%% NOT USED         % *********************************************************
%        \par\nobreak
%      \fi
%    \fi
%    \interlinepenalty\@M
%% NOT USED     % ******** Centered title in space narrower than textwidth ********
%% NOT USED     {\begin{minipage}{25pc}         % AKP limits the width
%% NOT USED     \setlength{\baselineskip}{22pt} % AKP changed value, skip for chapter title
%% NOT USED     \begin{center}                  % AKP title position (center, flushright, or flushleft)
%% NOT USED     \CT #1                          % AKP changes font to \CT
%% NOT USED     \end{center}                    % AKP
%% NOT USED     \end{minipage}}                 % AKP
%% NOT USED         \par\nobreak
%% NOT USED     \vskip 30\p@                    % AKP changed value
%% NOT USED     % *****************************************************************
%    % ******** Flush right chapter number and title with space on the right ********
%    \vspace*{-.5pc}                             % AKP
%    {\begin{minipage}{25pc}                     % AKP
%    \begin{flushright}                          % AKP
%    \setlength{\baselineskip}{\CNSKIP}          % AKP
%    \CN \hfil \thechapter \par \nobreak         % AKP
%    \vspace*{2.5pc}                             % AKP
%    \setlength{\baselineskip}{\CTSKIP}          % AKP
%    \CT \hfil #1                                % AKP
%    \end{flushright}                            % AKP
%    \end{minipage}}\hspace*{3pc} \par \nobreak  % AKP
%    \vskip 2.5pc                                % AKP
%    \noindent                                   % AKP
%    % ******************************************************************************
%  }}
%


 % redefine chapter to accept an additional argument for the author of a chapter
 % and use the long title in the TOC instead of the short one
\def\@chapter[#1]#2#3{\ifnum \c@secnumdepth >\m@ne
                        \if@mainmatter
                          \refstepcounter{chapter}%
                          \typeout{\@chapapp\space\thechapter.}%
                          \addcontentsline{toc}{chapter}%
                                    {\protect\numberline{\thechapter}#1}%
                        \else
                          % \addcontentsline{toc}{chapter}{#1}% AKP commented out
                          \addcontentsline{toc}{chapter}{#2}% AKP added
                        \fi
                     \else
                       % \addcontentsline{toc}{chapter}{#1}% AKP commented out
                       \addcontentsline{toc}{chapter}{#2}% AKP added
                     \fi
                     \chaptermark{#1}%
                     \addtocontents{lof}{\protect\addvspace{10\p@}}%
                     \addtocontents{lot}{\protect\addvspace{10\p@}}%
                     \if@twocolumn
                       \@topnewpage[\@makechapterhead{#2}]%
                     \else
                       \@makechapterhead{#2}{#3}%
                       \@afterheading
                     \fi}

 % redefines \@makechapterhead to accommodate an author argument (see immediately above)
 \def\@makechapterhead#1#2{%
 %  \vspace*{50\p@}  % AKP commented out so chapter starts at top
   {\parindent \z@ \raggedright \normalfont
     \ifnum \c@secnumdepth >\m@ne
       \if@mainmatter
 % NOT USED         % ******** Centered chapter number between hyphens ********
 % NOT USED         \begin{center}\CN - \thechapter\ - \end{center} % AKP positions chapter number and sets the font
 % NOT USED         % *********************************************************
         \par\nobreak
       \fi
     \fi
     \interlinepenalty\@M
     % ******** Flush right chapter number and title with space on the right ********
     \vspace*{-.5pc}                             % AKP
     {\begin{minipage}{25pc}                     % AKP
     \begin{flushright}                          % AKP
     \setlength{\baselineskip}{\CTSKIP}          % AKP
     \CT \hfil #1 \par \nobreak                  % AKP
     \vspace*{0.5pc}                             % AKP
     \MTA \hfil #2                               % AKP
     \end{flushright}                            % AKP
     \end{minipage}}\hspace*{3pc} \par \nobreak  % AKP
     \vskip 2.5pc                                % AKP
     \noindent                                   % AKP
     % ******************************************************************************
   }}



% redefines \schapter so that \chapter* pages have chapter marks to add to the running heads
\def\@schapter#1{\chaptermark{#1} % AKP added
                 \if@twocolumn
                   \@topnewpage[\@makeschapterhead{#1}]%
                 \else
                   \@makeschapterhead{#1}%
                   \@afterheading
                 \fi}

% redefines \@makeschapterhead to format the 1st \chapter* page
\def\@makeschapterhead#1{%
  \vspace*{35\p@} % AKP changed value
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
% NOT USED     % ******** Centered title ********
% NOT USED     {\setlength{\baselineskip}{22pt}
% NOT USED     \begin{center}     % AKP centers title
% NOT USED     \CT #1\par\nobreak % AKP changes font to \CT
% NOT USED     \end{center}}      % AKP
% NOT USED     \vskip 30\p@       % AKP changed value
% NOT USED     % ********************************
    % ******** Flushright title ********
    \begin{flushright}
    \CT \hfil  #1 \hspace*{3pc}\par\nobreak
    \end{flushright}
    \vskip2.5pc
    % **********************************
  }}

%*******************************************************************************
% RUNNING HEADS AND FOOTERS
%
% Customize the running heads and footers
\RequirePackage{fancyhdr} % see /texmf/doc/latex/fancyhdr/fancyhdr.dvi
%*******************************************************************************

% redefines \cleardoublepage so an inserted blank page is completely blank
%\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
  \hbox{}
  \vspace{\fill}
%  \begin{center}
%    This page contains only this sentence.
%  \end{center}
%  \vspace{\fill}
  \thispagestyle{empty}
  \newpage
  \if@twocolumn\hbox{}\fi\fi\fi}
%\makeatother

% NOT USED % redefines \cleardoublepage so it does nothing, thereby chapters may start on even pages
% NOT USED %\makeatletter
% NOT USED \def\cleardoublepage{}
% NOT USED %\makeatother

% defines the running heads
 \fancyhf{}
 \fancyhead[LE]{\RH \thepage}
 \fancyhead[RE]{\RH \leftmark}
 \fancyhead[LO]{\RH \rightmark}
 \fancyhead[RO]{\RH \thepage}
 \renewcommand{\headrulewidth}{0pt}
 \renewcommand{\footrulewidth}{0pt}

% redefines the plain style so that chapter pages have no header
\fancypagestyle{plain}{
 \fancyhf{}
 \fancyfoot[CE,CO]{\RH \vspace{6pt}\thepage}
 \renewcommand{\headrulewidth}{0pt}
 \renewcommand{\footrulewidth}{0pt}
}

%*******************************************************************************
% SECTION HEADS
%
% name = name of the sectioning command without the preceding backslash
% level = number indicating the level in the section hierarchy
% indent = indentation with respect to the left margin.  Negative values allowed.
%          0 = no indent.
% beforeskip = space between preceding text and the heading.  If value <0 then
%              indentation of the FOLLOWING paragraph is suppressed.  Absolute value
%              determines amount of space.  e.g. -10pt = 10pt of space with no indent
%              for the following paragraph.
% afterskip = space between heading and following text.  value >=0 results
%             in a display heading (new paragraph after heading).  Value <0 results
%             in a run-in heading (text comes right after heading on same line)
%             When negative, the absolute value determines the space between the
%             heading and the first word of the paragraph.
% style = used to control the look of the heading.  Typically a font command
%         (see above) goes here.
%*******************************************************************************
% set the last section level to be numbered {e.g. 2 = subsection and above are
% numbered, subsubsection and below are not.}
\setcounter{secnumdepth}{2}

% define a handy alias for starred sections that get added to the toc
\newcommand{\sectionstar}[1]{
  \section*{#1}
  \addcontentsline{toc}{section}{#1}
}

% NOT USED % get rid of chapter number before section header
% NOT USED \renewcommand \thesection {\@arabic \c@section}

% This creates a level 1 section
\renewcommand{\section}{\@startsection
  {section}%                           % the name of the section
  {1}%                                 % the level
  {0mm}%                               % the indent
  {-22pt \@plus -1ex \@minus -.2ex}%   % the beforeskip
  {8pt \@plus.2ex}%                    % the afterskip (value < 0 = run-in)
  {\HDONE}}%                           % the style

% This creates a level 2 section
\renewcommand{\subsection}{\@startsection
  {subsection}%                        % the name of the section
  {2}%                                 % the level
  {0mm}%                               % the indent
  {-11pt\@plus -1ex \@minus -.2ex}%    % the beforeskip
  {6pt \@plus .2ex}%                   % the afterskip
  {\HDTWO}}%                           % the style

% This creates a level 3 section
\renewcommand{\subsubsection}{\@startsection
  {subsubsection}%                     % the name of the section
  {3}%                                 % the level
  {0mm}%                               % the indent
  {-9pt\@plus -1ex \@minus -.2ex}%     % the beforeskip
  {-6pt \@plus .2ex}%                  % the afterskip
  {\HDTHREE}}%                         % the style

% This creates a level 4 section
\newcommand{\subsubsubsection}{\@startsection
  {subsubsubsection}%                  % the name of the section
  {4}%                                 % the level
  {0mm}%                               % the indent
  {-9pt\@plus -1ex \@minus -.2ex}%     % the beforeskip
  {-6pt \@plus .2ex}%                  % the afterskip
  {\HDFOUR}}%                          % the style

\newcommand\thesubsubsubsection{\thesubsubsection .\@arabic\c@subsubsubsection}

%*******************************************************************************
% CAPTIONS
%
% Customize the style of the captions
\RequirePackage{ccaption} % see /texmf/doc/latex/ccaption/ccaption.dvi
%*******************************************************************************
% NOT USED % get rid of chapter number before captions, i.e. no numbers
% NOT USED \renewcommand\theequation
% NOT USED {\ifnum \c@chapter>\z@ \fi \@arabic\c@equation}
% NOT USED \renewcommand\thefigure
% NOT USED {\ifnum \c@chapter>\z@ \fi \@arabic\c@figure}
% NOT USED \renewcommand\thetable
% NOT USED {\ifnum \c@chapter>\z@ \fi \@arabic\c@table}

% NOT USED % change the numbering so that the section number is used instead of the chapter number
% NOT USED \renewcommand{\thesection}{\arabic{section}}
% NOT USED \renewcommand{\theequation}{\thesection.\arabic{equation}}
% NOT USED \renewcommand{\thefigure}{\thesection.\arabic{figure}}
% NOT USED \renewcommand{\thetable}{\thesection.\arabic{table}}

% caption style
 \captionnamefont{\small\CAPNUM\bfseries}
 \captiontitlefont{\small\CAP}
 \captiondelim{. }

\newcounter{colorplate}
\renewcommand \thecolorplate
     {\@Roman\c@colorplate}
\def\fps@colorplate{tbp}
\def\ftype@colorplate{1}
\def\ext@colorplate{lof}
\def\fnum@colorplate{\colorplatename\nobreakspace\thecolorplate}
\newenvironment{colorplate}
               {\@float{colorplate}}
               {\end@float}
\newenvironment{colorplate*}
               {\@dblfloat{colorplate}}
               {\end@dblfloat}
\newcommand\colorplatename{Plate}

%*******************************************************************************
% FLOAT PARAMETERS
%*******************************************************************************
\renewcommand{\textfraction}{0.1}
\renewcommand{\bottomfraction}{0.99}
\renewcommand{\topfraction}{0.99}
\renewcommand{\floatpagefraction}{0.99}


%*******************************************************************************
% BIBLIOGRAPHY
%*******************************************************************************
% NOT USED % redefines the bibliography environment so that it's just a reference list
% NOT USED % rather than starting a new chapter.  Handy for adding a leading paragraph.
% NOT USED \renewenvironment{thebibliography}[1]
% NOT USED      {%\chapter*{\bibname} % AKP commented out
% NOT USED       \@mkboth{\MakeUppercase\bibname}{\MakeUppercase\bibname}%
% NOT USED       \list{\@biblabel{\@arabic\c@enumiv}}%
% NOT USED            {\settowidth\labelwidth{\@biblabel{#1}}%
% NOT USED             \leftmargin\labelwidth
% NOT USED             \advance\leftmargin\labelsep
% NOT USED             \@openbib@code
% NOT USED             \usecounter{enumiv}%
% NOT USED             \let\p@enumiv\@empty
% NOT USED             \renewcommand\theenumiv{\@arabic\c@enumiv}}%
% NOT USED       \sloppy
% NOT USED       \clubpenalty4000
% NOT USED       \@clubpenalty \clubpenalty
% NOT USED       \widowpenalty4000%
% NOT USED       \sfcode`\.\@m}
% NOT USED      {\def\@noitemerr
% NOT USED        {\@latex@warning{Empty `thebibliography' environment}}%
% NOT USED       \endlist}




%*******************************************************************************
% TOC
%
% Include Bibliography and Index in TOC
\RequirePackage[nottoc]{tocbibind} % see /texmf/doc/latex/tocbibind/tocbibind.dvi
% Customize the style of the TOC
\RequirePackage[titles]{tocloft} % see /texmf/doc/latex/tocloft/tocloft.dvi
%*******************************************************************************
% set the last section level to be listed in the TOC {e.g. 1 = section and above
% are included in TOC.}
\setcounter{tocdepth}{1}

% set TOC fonts
\renewcommand{\cftpartfont}{\TOC}
\renewcommand{\cftpartpagefont}{\TOC}
\renewcommand{\cftchapfont}{\TOC}
\renewcommand{\cftchappagefont}{\TOC}
\renewcommand{\@pnumwidth}{2.55em}
\renewcommand{\@tocrmarg}{3.55em}

% Use this to change the width of the space left for the section numbers
%\setlength{\cftsecnumwidth}{2.5pc}


% makes bibliography and index running heads not uppercase
\renewcommand{\tocetcmark}[1]{\@mkboth{#1}{#1}}




%% redefines the index environment so that running heads are not uppercase
%% and the chapter is included in the TOC
%
%\renewcommand\tableofcontents{%
%    \if@twocolumn
%      \@restonecoltrue\onecolumn
%    \else
%      \@restonecolfalse
%    \fi
%    \chapter*{\contentsname
%        \@mkboth{%
%          \contentsname}{\contentsname}}%
%    \@starttoc{toc}%
%    \if@restonecol\twocolumn\fi
%    }

 % redefines the bibliography environment to be a section instead of a chapter
 % this is often used in article compilations.
 \renewenvironment{thebibliography}[1]
      {\sectionstar{\bibname}% % AKP changed
       \@mkboth{\MakeUppercase\bibname}{\MakeUppercase\bibname}%
       \list{\@biblabel{\@arabic\c@enumiv}}%
            {\settowidth\labelwidth{\@biblabel{#1}}%
             \leftmargin\labelwidth
             \advance\leftmargin\labelsep
             \@openbib@code
             \usecounter{enumiv}%
             \let\p@enumiv\@empty
             \renewcommand\theenumiv{\@arabic\c@enumiv}}%
       \sloppy
       \clubpenalty4000
       \@clubpenalty \clubpenalty
       \widowpenalty4000%
       \sfcode`\.\@m}
      {\def\@noitemerr
        {\@latex@warning{Empty `thebibliography' environment}}%
       \endlist}
